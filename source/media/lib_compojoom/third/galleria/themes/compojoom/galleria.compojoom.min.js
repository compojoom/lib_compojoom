!function(t){Galleria.addTheme({name:"compojoom",author:"Daniel Dimitrov daniel@compojoom.com",version:1.5,defaults:{transition:"pulse",imageCrop:"landscape",carousel:!0,transitionSpeed:500,_showFullscreen:!0,_showPopout:!0,_showProgress:!0,_showTooltip:!0,_toggleInfo:!0},init:function(i){this.addElement("info-link","info-close","bar","fullscreen fa fa-arrows-alt","progress"),this.append({stage:"progress",container:"bar",info:["info-link","info-close"],bar:["thumbnails-container","fullscreen fa fa-arrows-alt"]});var e=this,n=this.$("thumbnails-container"),s=this.$("fullscreen fa fa-arrows-alt"),o=i.transition,a=this.$("bar"),l=!1,c=!1;this.bind("image",function(i){t(i.imageTarget).unbind("dblclick").on("dblclick",function(){e.toggleFullscreen()})}),s.click(function(){c?e.exitFullscreen():e.enterFullscreen()}),toggleThumbs=function(t){l&&CONTINUE?e.play():(CONTINUE=PLAYING,e.pause()),Galleria.utils.animate(n,{top:l?e.getStageHeight()+30:0},{easing:"galleria",duration:400,complete:function(){e.defineTooltip("thumblink",l?lang.show_thumbnails:lang.hide_thumbnails),thumb_link[l?"removeClass":"addClass"]("open"),l=!l}})};var r=this.$("info-link,info-close,info-text"),h=Galleria.TOUCH;this.$("loader,counter").show().css("opacity",.4),h||(this.addIdleState(this.get("image-nav-left"),{left:-50}),this.addIdleState(this.get("image-nav-right"),{right:-50}),this.addIdleState(this.get("counter"),{opacity:0})),!0===i._toggleInfo?r.bind("click:fast",function(){r.toggle()}):(r.show(),this.$("info-link, info-close").hide()),this.bind("thumbnail",function(i){h?t(i.thumbTarget).css("opacity",this.getIndex()?1:.6).bind("click:fast",function(){t(this).css("opacity",1).parent().siblings().children().css("opacity",.6)}):(t(i.thumbTarget).css("opacity",.6).parent().hover(function(){t(this).not(".active").children().stop().fadeTo(100,1)},function(){t(this).not(".active").children().stop().fadeTo(400,.6)}),i.index===this.getIndex()&&t(i.thumbTarget).css("opacity",1))});var f=function(i){t(i.thumbTarget).css("opacity",1).parent().siblings().children().css("opacity",.6)};this.bind("loadstart",function(t){t.cached||this.$("loader").show().fadeTo(200,.4),window.setTimeout(function(){f(t)},h?300:0),this.$("info").toggle(this.hasInfo())}),this.bind("loadfinish",function(t){this.$("loader").fadeOut(200)}),this.bind("fullscreen_enter",function(t){c=!0,e.setOptions("transition",!1),s.addClass("open"),a.css("bottom",0),this.defineTooltip("fullscreen","afullscreen enter")}),this.bind("fullscreen_exit",function(t){c=!1,Galleria.utils.clearTimer("bar"),e.setOptions("transition",o),s.removeClass("open"),a.css("bottom",0),this.defineTooltip("fullscreen","fullscreen leave")})}})}(jQuery);